(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-767a226d"],{"0012":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-card",{staticStyle:{display:"flex"},attrs:{id:"account",color:"var(--clr-card-3)"}},[a("Alerts",{ref:"alerts"}),a("section",[a("aside",{staticClass:"divcol"},[a("div",{staticClass:"space"},[a("label",{staticClass:"h9_em",attrs:{for:"nearName"}},[e._v("FIRST NAME")]),a("span",{staticClass:"tip"},[e._v("Visible to other members")])]),a("v-text-field",{attrs:{id:"nearName",solo:"","hide-details":""},model:{value:e.first_name,callback:function(t){e.first_name=t},expression:"first_name"}})],1),a("aside",{staticClass:"divcol"},[a("label",{staticClass:"h9_em",attrs:{for:"fullName"}},[e._v("LAST NAME")]),a("v-text-field",{attrs:{id:"fullName",solo:"","hide-details":""},model:{value:e.last_name,callback:function(t){e.last_name=t},expression:"last_name"}})],1),a("aside",{staticClass:"divcol"},[a("div",{staticClass:"space"},[a("label",{staticClass:"h9_em",attrs:{for:"email"}},[e._v("EMAIL")]),a("span",{staticClass:"tip"},[e._v("For notifications")])]),a("v-text-field",{attrs:{id:"email",solo:"","hide-details":""},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}})],1),a("aside",{staticClass:"divcol"},[a("div",{staticClass:"space"},[a("label",{staticClass:"h9_em",attrs:{for:"phone"}},[e._v("PHONE NUMBER")]),a("span",{staticClass:"tip"},[e._v("For receiving notifications")])]),a("v-text-field",{attrs:{id:"phone",solo:"","hide-details":""},model:{value:e.phone,callback:function(t){e.phone=t},expression:"phone"}})],1)]),e.newProfile?a("v-btn",{staticClass:"h11_em buttons align",on:{click:function(t){return e.setData()}}},[e._v(" SAVE CHANGES ")]):a("v-btn",{staticClass:"h11_em buttons align",on:{click:function(t){return e.setDataEdit()}}},[e._v(" SAVE CHANGES ")])],1)},n=[],r=a("1da1"),o=(a("96cf"),a("f749")),l=a("d9eb"),i=l["connect"],c=l["keyStores"],u=l["WalletConnection"],d=new c.BrowserLocalStorageKeyStore,m={networkId:"testnet",keyStore:d,nodeUrl:"https://rpc.testnet.near.org",walletUrl:"https://wallet.testnet.near.org",helperUrl:"https://helper.testnet.near.org",explorerUrl:"https://explorer.testnet.near.org"},f={name:"account",i18n:a("3569"),components:{Alerts:o["a"]},data:function(){return{id:null,account:{},first_name:null,last_name:null,email:null,phone:null,wallet:null,newProfile:null}},mounted:function(){this.getData(),this.formData=new FormData},methods:{getData:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){var a,s,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.account={},t.next=3,i(m);case 3:a=t.sent,s=new u(a),e.account.wallet=s.getAccountId(),s.isSignedIn()&&(n="https://nearbase.io/nearbase/api/v1/profile/?wallet="+e.account.wallet,e.axios.defaults.headers.common.Authorization="token",e.axios.get(n).then((function(t){console.log(t.data),t.data[0]?(e.id=t.data[0].id,e.first_name=t.data[0].first_name,e.last_name=t.data[0].last_name,e.email=t.data[0].email,e.phone=t.data[0].phone,e.newProfile=!1):e.newProfile=!0})).catch((function(e){console.log(e)})));case 7:case"end":return t.stop()}}),t)})))()},setData:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){var a,s,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,i(m);case 2:a=t.sent,s=new u(a),s.isSignedIn()&&(console.log("first",e.first_name),console.log("last_name",e.last_name),console.log("email",e.email),console.log("phone",e.phone),e.formData.append("wallet",s.getAccountId()),e.first_name&&e.formData.append("first_name",e.first_name),e.last_name&&e.formData.append("last_name",e.last_name),e.email&&e.formData.append("email",e.email),e.phone&&e.formData.append("phone",e.phone),e.$store.state.user.image&&e.formData.append("avatar",e.$store.state.user.image),n="https://nearbase.io/nearbase/api/v1/profile/",e.axios.defaults.headers.common.Authorization="token ",e.axios.post(n,e.formData).then((function(t){t.data&&(e.$refs.alerts.Alerts("success",null,"El perfil ha sido guardado"),e.getData())})).catch((function(t){console.log(t),e.$refs.alerts.Alerts("cancel",null,"Ha ocurrido algo")})));case 5:case"end":return t.stop()}}),t)})))()},setDataEdit:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){var a,s,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.log("aqui",e.$store.state.user.image),t.next=3,i(m);case 3:a=t.sent,s=new u(a),s.isSignedIn()&&(e.formData.append("wallet",s.getAccountId()),e.formData.append("first_name",e.first_name),e.formData.append("last_name",e.last_name),e.email&&e.formData.append("email",e.email),e.formData.append("phone",e.phone),e.$store.state.user.image&&e.formData.append("avatar",e.$store.state.user.image),n="https://nearbase.io/nearbase/api/v1/profile/"+e.id+"/",e.axios.defaults.headers.common.Authorization="token ",e.axios.patch(n,e.formData).then((function(t){t.data&&(console.log(t.data),e.$refs.alerts.Alerts("success",null,"El perfil ha sido actualizado"),e.getData())})).catch((function(t){console.log(t),e.$refs.alerts.Alerts("cancel",null,"Ha ocurrido algo")})));case 6:case"end":return t.stop()}}),t)})))()}}},p=f,h=(a("c92f"),a("2877")),v=a("6544"),g=a.n(v),_=a("8336"),b=a("b0af"),x=a("8654"),w=Object(h["a"])(p,s,n,!1,null,null,null);t["default"]=w.exports;g()(w,{VBtn:_["a"],VCard:b["a"],VTextField:x["a"]})},"171b":function(e,t,a){},"1f3b":function(e,t){e.exports={messages:{ES:{success:"ÉXITO!",textSuccess:"Tus cambios han sido guardados satisfactoriamente",cancel:"ERROR!",textCancel:"Algo extraño ha ocurrido, intentalo denuevo"},US:{success:"SUCCESS!",textSuccess:"Your changes have been successfully saved",cancel:"ERROR!",textCancel:"Something strange has happened, try again"}}}},3569:function(e,t){e.exports={messages:{ES:{savePhrase:"Este registro genera una frase de 12 palabras que debe guardar en un lugar seguro"},US:{savePhrase:"This record generates a 12-word phrase that you must keep in a safe place"}}}},"76c9":function(e,t,a){"use strict";a("171b")},a935:function(e,t,a){},c92f:function(e,t,a){"use strict";a("a935")},f749:function(e,t,a){"use strict";var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",{attrs:{id:"alerts"}},e._l(e.dataAlerts,(function(t,s){return a("v-snackbar",{key:s,style:"--color: "+t.color,attrs:{centered:"",top:"",transition:"slide-Y-reverse-transition"},model:{value:t.model,callback:function(a){e.$set(t,"model",a)},expression:"item.model"}},[a("img",{attrs:{src:t.icon,alt:t.key+" Icon"}}),a("div",{staticClass:"divcol"},[a("h3",{staticClass:"font1"},[e._v(e._s(e.$t(t.title)))]),a("p",{staticClass:"font2 p"},[e._v(e._s(e.$t(t.desc)))])])])})),1)},n=[],r=(a("c740"),{name:"alerts",i18n:a("1f3b"),data:function(){return{alert:!0,dataAlerts:[{key:"success",title:"success",desc:"textSuccess",icon:a("1c27"),color:"#0F43D5",model:!1},{key:"cancel",title:"cancel",desc:"textCancel",icon:a("b463"),color:"#F16211",model:!1}]}},methods:{Alerts:function(e,t,a){var s=this.dataAlerts.findIndex((function(t){return t.key==e}));this.dataAlerts[s].model=!0,t&&(this.dataAlerts[s].title=t),a&&(this.dataAlerts[s].desc=a)}}}),o=r,l=(a("76c9"),a("2877")),i=a("6544"),c=a.n(i),u=a("2db4"),d=Object(l["a"])(o,s,n,!1,null,null,null);t["a"]=d.exports;c()(d,{VSnackbar:u["a"]})}}]);
//# sourceMappingURL=chunk-767a226d.df4707e7.js.map