{"version":3,"sources":["webpack:///./src/pages/explore/market/Market.vue?a360","webpack:///src/pages/explore/market/Market.vue","webpack:///./src/pages/explore/market/Market.vue?412a","webpack:///./src/pages/explore/market/Market.vue","webpack:///./src/pages/explore/market/Market.scss?a37b"],"names":["render","_vm","this","_h","$createElement","_c","_self","dataTop","length","staticClass","_l","item","index","key","class","colspan","active","staticStyle","attrs","img","_v","_s","domain","profile","date","_e","hide","price","dollar","on","$event","CloseCard","domainBuy","OpenCard","staticRenderFns","networkId","keyStore","nodeUrl","walletUrl","helperUrl","explorerUrl","priceNear","name","mounted","element","data","methods","formatPrice","utils","format","formatNearAmount","toLocaleString","useGrouping","priceNEAR","then","catch","console","getMarket","CONTRACT_NAME","connect","near","wallet","contract","viewMethods","sender","i","require","getData","url","response","changeMethods","id","forEach","component","VBtn","VCard","VIcon","VProgressCircular"],"mappings":"uHAAA,IAAIA,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAA8B,GAAtBF,EAAIM,QAAQC,OAAaH,EAAG,UAAU,CAACI,YAAY,WAAWR,EAAIS,GAAIT,EAAW,SAAE,SAASU,EAAKC,GAAO,OAAOP,EAAG,QAAQ,CAACQ,IAAID,EAAMH,YAAY,+CAA+CK,MAAM,CAACC,QAAQJ,EAAKK,SAAS,CAACX,EAAG,SAAS,CAACI,YAAY,oBAAoBK,MAAM,CAACE,OAAQL,EAAKK,QAAQC,YAAY,CAAC,QAAU,SAAS,CAACZ,EAAG,MAAM,CAACS,MAAM,CAACE,OAAOL,EAAKK,QAAQE,MAAM,CAAC,IAAMP,EAAKQ,IAAI,IAAM,uBAAwBR,EAAW,OAAEN,EAAG,MAAM,CAACI,YAAY,2BAA2B,CAACJ,EAAG,KAAK,CAACI,YAAY,8BAA8B,CAACR,EAAImB,GAAGnB,EAAIoB,GAAGV,EAAKW,WAAWjB,EAAG,OAAO,CAACI,YAAY,UAAU,CAACR,EAAImB,GAAG,QAAQf,EAAG,IAAI,CAACI,YAAY,OAAOS,MAAM,CAAC,KAAO,MAAM,CAACjB,EAAImB,GAAGnB,EAAIoB,GAAGV,EAAKY,YAAYlB,EAAG,MAAMJ,EAAImB,GAAG,kBAAkBf,EAAG,SAAS,CAACJ,EAAImB,GAAGnB,EAAIoB,GAAGV,EAAKa,aAAavB,EAAIwB,OAAOpB,EAAG,SAAS,CAACI,YAAY,mBAAmBQ,YAAY,CAAC,QAAU,QAAQC,MAAM,CAAC,MAAQ,sBAAsB,CAACb,EAAG,KAAK,CAACI,YAAY,sBAAsBK,MAAM,CAACY,KAAKf,EAAKK,SAAS,CAACf,EAAImB,GAAGnB,EAAIoB,GAAGV,EAAKW,WAAWjB,EAAG,MAAM,CAACI,YAAY,UAAU,CAACJ,EAAG,QAAQ,CAACI,YAAY,UAAU,CAACJ,EAAG,OAAO,CAACI,YAAY,UAAU,CAACR,EAAImB,GAAG,kBAAkBf,EAAG,MAAMJ,EAAImB,GAAG,UAAUf,EAAG,MAAM,CAACI,YAAY,aAAa,CAACJ,EAAG,OAAO,CAACI,YAAY,aAAaQ,YAAY,CAAC,eAAe,0BAA0B,CAAChB,EAAImB,GAAGnB,EAAIoB,GAAGV,EAAKgB,UAAUtB,EAAG,OAAO,CAACI,YAAY,UAAU,CAACR,EAAImB,GAAG,KAAKnB,EAAIoB,GAAGV,EAAKiB,QAAQ,WAAWvB,EAAG,QAAQ,CAACI,YAAY,2BAA2B,CAAGE,EAAKK,OAAqN,CAACX,EAAG,QAAQ,CAACI,YAAY,eAAeS,MAAM,CAAC,KAAO,IAAIW,GAAG,CAAC,MAAQ,SAASC,GAAQ,OAAO7B,EAAI8B,UAAUpB,MAAS,CAACN,EAAG,SAAS,CAACa,MAAM,CAAC,KAAO,6BAA6B,CAACjB,EAAImB,GAAG,qBAAqB,GAAGf,EAAG,QAAQ,CAACI,YAAY,gBAAgBoB,GAAG,CAAC,MAAQ,SAASC,GAAQ,OAAO7B,EAAI+B,UAAUrB,MAAS,CAACV,EAAImB,GAAG,eAAef,EAAG,QAAQ,CAACI,YAAY,kBAAkBS,MAAM,CAAC,SAAW,KAAK,CAACjB,EAAImB,GAAG,mBAA9lBf,EAAG,QAAQ,CAACI,YAAY,eAAeS,MAAM,CAAC,KAAO,IAAIW,GAAG,CAAC,MAAQ,SAASC,GAAQ,OAAO7B,EAAIgC,SAAStB,MAAS,CAACN,EAAG,SAAS,CAACa,MAAM,CAAC,KAAO,6BAA6B,CAACjB,EAAImB,GAAG,sBAAsB,IAAwa,QAAQ,MAAK,GAAGf,EAAG,UAAU,CAACY,YAAY,CAAC,eAAe,QAAQC,MAAM,CAAC,MAAQ,SAAS,QAAU,WAAW,CAACb,EAAG,sBAAsB,CAACa,MAAM,CAAC,KAAO,IAAI,MAAQ,GAAG,cAAgB,GAAG,MAAQ,YAAY,IACn0EgB,EAAkB,G,2GCgEtB,qFAEA,oCACA,GACEC,UAAFA,UACEC,SAAFA,EACEC,QAAFA,+BACEC,UAAFA,kCACEC,UAAFA,kCACEC,YAAFA,qCAEe,GACbC,UAAWA,KACXC,KAAMA,SACNC,QAHF,WAGA,wKACA,cADA,OAEA,cACA,yBACA,qDACAC,UACAA,eAEA,2CACA,6CATA,8CAWEC,KAdF,WAeI,MAAO,CACLtC,QAASA,KAGbuC,QAASA,CACPC,YADJ,SACApB,GACM,OAAOqB,EAAMC,OAAOC,iBAAiBvB,EAAMwB,eAAe,WAAY,CAA5EC,mBAEIC,UAJJ,WAIA,wKACA,oDACAC,MAAA,YACA,0BAEAC,OAAA,YACAC,kBANA,8CASIC,UAbJ,WAaA,2KACA,aACAC,EAAA,4BAFA,SAIAC,KAJA,cAIAC,EAJA,OAMAC,EAAA,SACAC,EAAA,qBACAC,2BACAC,qBATA,SAWAF,eACAR,KADA,yDACA,uGACAW,EAAA,EADA,YACAA,YADA,wBAEAtD,EAAA,GACAA,aACAA,qBAJA,SAKAuD,qDALA,OAKAvD,MALA,OAMAA,kCACAA,2BACAA,0CACAA,YACAA,oDACAA,wBACA6C,eACA,kBAbA,QACAS,IADA,2DADA,uDAXA,8CA6BIE,QA1CJ,WA0CA,kLAEAR,KAFA,OAEAC,EAFA,OAIAC,EAAA,SACA,6BAEAO,EAAA,iBACA,eACAd,KADA,yDACA,2GACAe,OADA,iBAEAJ,EAAA,EAFA,YAEAA,iBAFA,wBAGAtD,EAAA,GACAA,oCAJA,SAKAuD,qDALA,OAKAvD,MALA,OAMAA,0BACAA,wBACAA,0BACAA,YACAA,4BACAA,uBACAA,cACAA,cACAA,kDACA,kBAfA,QAEAsD,IAFA,2DADA,uDAmBAV,OAAA,YACAC,kBA5BA,8CAgCIxB,UA1EJ,SA0EArB,GAAA,gKACA6C,eACAE,EAAA,4BAFA,SAIAC,KAJA,cAIAC,EAJA,OAMAC,EAAA,SACAC,EAAA,qBACAQ,6BACAN,qBATA,SAYAF,cACAS,SACA,kBACAvB,6DAfA,8CAkBIf,SA5FJ,SA4FAtB,GACMT,KAAKK,QAAQiE,SAAQ,SAA3B,GACQ5B,EAAQA,QAASA,KAEnBjC,EAAKA,QAASA,GAEhBoB,UAlGJ,SAkGApB,GACMT,KAAKK,QAAQiE,SAAQ,SAA3B,GACQ5B,EAAQA,QAASA,KAEnBjC,EAAKA,QAASA,KCrM0V,I,6FCQ1W8D,EAAY,eACd,EACAzE,EACAkC,GACA,EACA,KACA,KACA,MAIa,aAAAuC,EAAiB,QAQhC,IAAkBA,EAAW,CAACC,OAAA,KAAKC,QAAA,KAAMC,QAAA,KAAMC,oBAAA,Q,kCC3B/C,W","file":"js/chunk-986b5a38.61ba5723.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.dataTop.length != 0)?_c('section',{staticClass:\"contTop\"},_vm._l((_vm.dataTop),function(item,index){return _c('aside',{key:index,staticClass:\"filterItems card-wrapper font2 center divcol\",class:{colspan:item.active}},[_c('v-card',{staticClass:\"cartaTop relative\",class:{active: item.active},staticStyle:{\"display\":\"flex\"}},[_c('img',{class:{active:item.active},attrs:{\"src\":item.img,\"alt\":\"Referencial Image\"}}),(item.active)?_c('div',{staticClass:\"contText divcol jcenter\"},[_c('h3',{staticClass:\"font1 h6_em not_typography\"},[_vm._v(_vm._s(item.domain))]),_c('span',{staticClass:\"h11_em\"},[_vm._v(\" by \"),_c('a',{staticClass:\"bold\",attrs:{\"href\":\"#\"}},[_vm._v(_vm._s(item.profile))]),_c('br'),_vm._v(\" published on \"),_c('strong',[_vm._v(_vm._s(item.date))])])]):_vm._e()]),_c('v-card',{staticClass:\"cartaDown divcol\",staticStyle:{\"display\":\"flex\"},attrs:{\"color\":\"var(--clr-card-3)\"}},[_c('h3',{staticClass:\"font1 h7_em tcenter\",class:{hide:item.active}},[_vm._v(_vm._s(item.domain))]),_c('div',{staticClass:\"jspace\"},[_c('aside',{staticClass:\"divcol\"},[_c('span',{staticClass:\"h11_em\"},[_vm._v(\"Current price \"),_c('br'),_vm._v(\"NEAR\")]),_c('div',{staticClass:\"contPrice\"},[_c('span',{staticClass:\"h7_em bold\",staticStyle:{\"margin-right\":\"clamp(.5em, 1vw, 1em)\"}},[_vm._v(_vm._s(item.price))]),_c('span',{staticClass:\"h11_em\"},[_vm._v(\"($\"+_vm._s(item.dollar)+\")\")])])]),_c('aside',{staticClass:\"contButtons divrow aend\"},[(!item.active)?_c('v-btn',{staticClass:\"buttons-icon\",attrs:{\"icon\":\"\"},on:{\"click\":function($event){return _vm.OpenCard(item)}}},[_c('v-icon',{attrs:{\"size\":\"clamp(1em, 1.5vw, 1.5em)\"}},[_vm._v(\"mdi-arrow-right\")])],1):[_c('v-btn',{staticClass:\"buttons-icon\",attrs:{\"icon\":\"\"},on:{\"click\":function($event){return _vm.CloseCard(item)}}},[_c('v-icon',{attrs:{\"size\":\"clamp(1em, 1.5vw, 1.5em)\"}},[_vm._v(\"mdi-arrow-left\")])],1),_c('v-btn',{staticClass:\"buyBtn h11_em\",on:{\"click\":function($event){return _vm.domainBuy(item)}}},[_vm._v(\" BUY NOW \")]),_c('v-btn',{staticClass:\"offerBtn h11_em\",attrs:{\"disabled\":\"\"}},[_vm._v(\" MAKE OFFER \")])]],2)])])],1)}),0):_c('section',{staticStyle:{\"margin-block\":\"10em\"},attrs:{\"align\":\"center\",\"justify\":\"center\"}},[_c('v-progress-circular',{attrs:{\"size\":110,\"width\":10,\"indeterminate\":\"\",\"color\":\"white\"}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <section v-if=\"dataTop.length != 0\" class=\"contTop\">\n    <aside v-for=\"(item, index) in dataTop\" :key=\"index\"\n      :class=\"{colspan:item.active}\" class=\"filterItems card-wrapper font2 center divcol\">\n      <v-card class=\"cartaTop relative\" style=\"display:flex\" :class=\"{active: item.active}\">\n        <img :class=\"{active:item.active}\" :src=\"item.img\" alt=\"Referencial Image\">\n        <div v-if=\"item.active\" class=\"contText divcol jcenter\">\n          <h3 class=\"font1 h6_em not_typography\">{{ item.domain }}</h3>\n          <span class=\"h11_em\">\n            by <a href=\"#\" class=\"bold\">{{ item.profile }}</a><br>\n            published on <strong>{{ item.date }}</strong>\n          </span>\n        </div>\n      </v-card>\n\n      <v-card class=\"cartaDown divcol\" color=\"var(--clr-card-3)\" style=\"display:flex\">\n        <h3 :class=\"{hide:item.active}\" class=\"font1 h7_em tcenter\">{{ item.domain }}</h3>\n\n        <div class=\"jspace\">\n          <aside class=\"divcol\">\n            <span class=\"h11_em\">Current price <br>NEAR</span>\n            <div class=\"contPrice\">\n              <span class=\"h7_em bold\" style=\"margin-right: clamp(.5em, 1vw, 1em);\">{{ item.price }}</span>\n              <span class=\"h11_em\">(${{ item.dollar }})</span>\n            </div>\n          </aside>\n\n          <aside class=\"contButtons divrow aend\">\n            <v-btn v-if=\"!item.active\" icon class=\"buttons-icon\" @click=\"OpenCard(item)\">\n              <v-icon size=\"clamp(1em, 1.5vw, 1.5em)\">mdi-arrow-right</v-icon>\n            </v-btn>\n\n            <template v-else>\n              <v-btn icon class=\"buttons-icon\" @click=\"CloseCard(item)\">\n                <v-icon size=\"clamp(1em, 1.5vw, 1.5em)\">mdi-arrow-left</v-icon>\n              </v-btn>\n              <v-btn \n                class=\"buyBtn h11_em\"\n                @click=\"domainBuy(item)\"\n              >\n                BUY NOW\n              </v-btn>\n              <v-btn disabled class=\"offerBtn h11_em\">\n                MAKE OFFER\n              </v-btn>\n            </template>\n          </aside>\n        </div>\n      </v-card>\n    </aside>\n  </section>\n  <section v-else align=\"center\" justify=\"center\" style=\"margin-block:10em\">\n    <v-progress-circular\n      :size=\"110\"\n      :width=\"10\"\n      indeterminate\n      color=\"white\"\n    ></v-progress-circular>\n  </section>\n</template>\n<script>\n//import axios from 'axios'\nimport * as nearAPI from 'near-api-js'\nimport moment from 'moment';\n\nconst { connect, keyStores, WalletConnection, Contract, utils } = nearAPI\n\nconst keyStore = new keyStores.BrowserLocalStorageKeyStore()\nconst config = {\n        networkId: \"testnet\",\n        keyStore, \n        nodeUrl: \"https://rpc.testnet.near.org\",\n        walletUrl: \"https://wallet.testnet.near.org\",\n        helperUrl: \"https://helper.testnet.near.org\",\n        explorerUrl: \"https://explorer.testnet.near.org\",\n      };\nexport default {\n  priceNear: null,\n  name: \"market\",\n  async mounted() {\n    await this.priceNEAR()\n    this.getMarket()\n    this.$parent.title = 'MARKET'\n    this.$parent.dataNavigationExplore.forEach(element => {\n      element.show = true;\n      element.active = false;\n    });\n    this.$parent.dataNavigationExplore[1].show = false;\n    this.$parent.dataNavigationExplore[1].active = true;\n  },\n  data() {\n    return {\n      dataTop: []\n    }\n  },\n  methods: {\n    formatPrice (price) {\n      return utils.format.formatNearAmount(price.toLocaleString('fullwide', { useGrouping: false }))\n    },\n    async priceNEAR(){\n      await this.axios.get(\"https://nearblocks.io/api/near-price\")\n        .then((response) => {\n          this.priceNear = response.data.usd\n        })\n        .catch((e) => {\n          console.log(e)\n        })\n    },\n    async getMarket() {\n      this.dataTop = []\n      const CONTRACT_NAME = 'contract.nearbase.testnet'\n      // connect to NEAR\n      const near = await connect(config)\n      // create wallet connection\n      const wallet = new WalletConnection(near)\n      const contract = new Contract(wallet.account(), CONTRACT_NAME, {\n        viewMethods: ['get_market'],\n        sender: wallet.account()\n      })\n      await contract.get_market()\n        .then(async (response) => {\n          for (var i = 0; i < response.length; i++) {\n            var item = {}\n            item.id = response[i].id\n            item.domain = response[i].domain\n            item.img = await require(\"@/assets/avatars/\"+ (Math.floor((Math.random() * (6-1)) + 1)) +\".png\")\n            item.price = this.formatPrice(response[i].price)\n            item.profile = response[i].user_seller\n            item.dollar =  (item.price * this.priceNear).toFixed(2)\n            item.active  = false\n            item.date = moment(response[i].date_time/1000000).format('DD/MM/YYYY'),\n            item.status = response[i].is_active\n            console.log(item)\n            this.dataTop.push(item)\n          }\n        })\n    },\n    async getData () {\n      // connect to NEAR\n      const near = await connect(config);\n      // create wallet connection\n      const wallet = new WalletConnection(near)\n      this.accountId = wallet.getAccountId()\n      \n        const url = \"api/v1/market/\"\n        this.axios.get(url)\n          .then(async (response) => {\n            if (response.data) {\n              for (var i = 0; i < response.data.length; i++) {\n                let item = {}\n                item.id_contract = response.data[i].id_contract\n                item.img = await require(\"@/assets/avatars/\"+ (Math.floor((Math.random() * (6-1)) + 1)) +\".png\")\n                item.domain = response.data[i].domain\n                item.price = response.data[i].price\n                item.status  = response.data[i].active\n                item.active  = false\n                item.profile = response.data[i].profile\n                item.date = \"April 2, 2022\",\n                item.hour = \"1:41\",\n                item.near = \"0,08\",\n                item.dollar =  (response.data[i].price * this.priceNear).toFixed(2)\n                this.dataTop.push(item)\n              }  \n            }\n        }).catch((error) => {\n          console.log(error)\n        })\n      \n    },\n    async domainBuy (item) {\n      console.log(item)\n      const CONTRACT_NAME = 'contract.nearbase.testnet'\n      // connect to NEAR\n      const near = await connect(config)\n      // create wallet connection\n      const wallet = new WalletConnection(near)\n      const contract = new Contract(wallet.account(), CONTRACT_NAME, {\n        changeMethods: ['domain_buy'],\n        sender: wallet.account()\n      })\n      \n      await contract.domain_buy({\n        id: item.id,\n      }, '300000000000000', // attached GAS (optional)\n      utils.format.parseNearAmount((Number(item.price) + 0.015).toString()))\n    },\n\n    OpenCard(item) {\n      this.dataTop.forEach(element => {\n        element.active = false\n      });\n      item.active = true\n    },\n    CloseCard(item) {\n      this.dataTop.forEach(element => {\n        element.active = false\n      });\n      item.active = false\n    },\n  }\n};\n</script>\n\n<style src=\"./Market.scss\" lang=\"scss\" />\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Market.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Market.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Market.vue?vue&type=template&id=1d8b2eb0&\"\nimport script from \"./Market.vue?vue&type=script&lang=js&\"\nexport * from \"./Market.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Market.scss?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VCard } from 'vuetify/lib/components/VCard';\nimport { VIcon } from 'vuetify/lib/components/VIcon';\nimport { VProgressCircular } from 'vuetify/lib/components/VProgressCircular';\ninstallComponents(component, {VBtn,VCard,VIcon,VProgressCircular})\n","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../../node_modules/@vue/cli-service/node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!./Market.scss?vue&type=style&index=0&lang=scss&\""],"sourceRoot":""}